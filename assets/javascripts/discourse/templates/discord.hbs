<h1>{{ i18n 'discord_datastore.title' }}</h1>

<div>
    {{ "messageTotal: " }}{{ model.test }}
</div><div>
    {{ "Selected user: " }}{{ searched_username }}
</div>

<div> <hr> </div>

<!-- 

<form {{ action 'createDiscordMessage' content on='submit' }}>
  <label>
    {{ i18n 'discord_datastore.test.text_field_label' }}
    {{ textarea name='discordmessage' value=content }}
  </label>

  <button type='submit' class='btn btn-primary'>
    {{ i18n 'discord_datastore.test.submit_label' }}
  </button>
</form>

<label>

-->
<div><h4>  {{ i18n 'discord_datastore.user_search' }} </h4></div>

<div>
{{user-chooser
  id="filter-by-user"
  value=searchedTerms.username
  onChange=(action "onChangeSearchTermForUsername")
    options=(hash
    headerAriaLabel=(i18n "discord_datastore.user_search")
    maximum=1
    excludeCurrentUser=false
  )
}}
</div>

<br>

<div class="discord-data">
  <div class="discord-data-messages">

    {{#if messages}}
      <div class="discord-message-list" >

        <div class ="message-pagination">
          <button type='submit' class='btn btn-message-prev'>
          {{ i18n "discord_datastore.message_pagination_previous" }}
        </button>
        <b>{{ currentPage }}</b>
        <button type='submit' class='btn btn-primary-message-next' {{ action "nextMessagePage" currentPage }}>
          {{ i18n "discord_datastore.message_pagination_next" }}
        </button>
        </div>

        <ul>
          {{#each messages as |message|}}
            <li>
              <div class="discord-message">
                <div class="discord-avatar"><img src="{{message.user_avatar}}" alt="" /></div>
                <div class="discord-message-content">
                  {{ message.user_nickname }}{{ " in " }}<b>{{"#"}}{{ message.channel_name }}</b>{{ ": " }}<br>
                  {{ message.content }}
                </div>
              </div>
            </li>
          {{/each}}
        </ul>
      </div>
    {{/if}}

  </div>

  <div class="discord-data-channels">

    {{#if channels}}
      <div class ="discord-channel-list" >
        {{#each channels as |channel|}}
          <div class="discord-channel-list-element">
            <h3>{{ "#" }}{{ channel.name }}</h3>{{ channel.length }}{{ ' ' }}{{i18n 'discord_datastore.channel_message_total' }}
          </div>
        {{/each}}
      </div>
    {{/if}}
  </div>

</div>
